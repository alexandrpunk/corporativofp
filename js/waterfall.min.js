function waterfall(a){function b(a,b){var c=window.getComputedStyle(b);return parseFloat(c["margin"+a])||0}function c(a){return a+"px"}function d(a){return parseFloat(a.style.top)}function e(a){return parseFloat(a.style.left)}function f(a){return a.clientWidth}function g(a){return a.clientHeight}function h(a){return d(a)+g(a)+b("Bottom",a)}function i(a){return e(a)+f(a)+b("Right",a)}function j(a){a=a.sort(function(a,b){return h(a)===h(b)?e(b)-e(a):h(b)-h(a)})}"string"==typeof a&&(a=document.querySelector(a));var k=[].map.call(a.children,function(a){return a.style.position="absolute",a});a.style.position="relative";var l=[];k.length&&(k[0].style.top="0px",k[0].style.left=c(b("Left",k[0])),l.push(k[0]));for(var m=1;m<k.length;m++){var n=k[m-1],o=k[m],p=i(n)+f(o)<=f(a);if(!p)break;o.style.top=n.style.top,o.style.left=c(i(n)+b("Left",o)),l.push(o)}for(;m<k.length;m++){j(l);var o=k[m],q=l.pop();o.style.top=c(h(q)+b("Top",o)),o.style.left=c(e(q)),l.push(o)}j(l);var r=l[0];a.style.height=c(h(r)+b("Bottom",r))}